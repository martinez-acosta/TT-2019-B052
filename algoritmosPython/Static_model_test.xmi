<?xml version='1.0' encoding='UTF-8'?>
<gdmLang:Model xmlns:xmi="http://www.omg.org/XMI" xmlns:gdmLang="http://www.unican.es/istr/mortadelo/gdm/lang/GdmLang" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmi:version="2.0">
  <queries xsi:type="gdmLang:Query" name="Q1_latestStateOfAPlayer">
    <from_ xsi:type="gdmLang:From" entity="//@entities.2">
      <alias xsi:type="gdmLang:Alias" name="server"/>
    </from_>
    <projections xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.0/@from_/@alias" attribute="//@entities.2/@features.0"/>
    <condition xsi:type="gdmLang:AndConjunction">
      <left xsi:type="gdmLang:Equality" value="?">
        <selection xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.0/@from_/@alias" attribute="//@entities.2/@features.2"/>
      </left>
    </condition>
    <inclusions xsi:type="gdmLang:Inclusion" refs="//@entities.2/@features.3" refAlias="//@queries.0/@from_/@alias">
      <alias xsi:type="gdmLang:Alias" name="sessions"/>
    </inclusions>
  </queries>
  <queries xsi:type="gdmLang:Query" name="Q2_latestStateOfAllPlayers">
    <from_ xsi:type="gdmLang:From" entity="//@entities.1">
      <alias xsi:type="gdmLang:Alias" name="state"/>
    </from_>
    <projections xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.1/@from_/@alias" attribute="//@entities.1/@features.2"/>
    <projections xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.1/@from_/@alias" attribute="//@entities.1/@features.1"/>
    <projections xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.1/@from_/@alias" attribute="//@entities.1/@features.0"/>
    <projections xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.1/@from_/@alias" attribute="//@entities.1/@features.3"/>
    <condition xsi:type="gdmLang:AndConjunction">
      <left xsi:type="gdmLang:Equality" value="?">
        <selection xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.1/@from_/@alias" attribute="//@entities.1/@features.3"/>
      </left>
    </condition>
    <inclusions xsi:type="gdmLang:Inclusion" refAlias="//@queries.1/@from_/@alias">
      <alias xsi:type="gdmLang:Alias" name="player"/>
    </inclusions>
  </queries>
  <queries xsi:type="gdmLang:Query" name="Q3_serverInfo">
    <from_ xsi:type="gdmLang:From" entity="//@entities.2">
      <alias xsi:type="gdmLang:Alias" name="server"/>
    </from_>
    <projections xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.2/@from_/@alias" attribute="//@entities.2/@features.0"/>
    <projections xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.2/@from_/@alias" attribute="//@entities.2/@features.1"/>
    <condition xsi:type="gdmLang:AndConjunction">
      <left xsi:type="gdmLang:Equality" value="?">
        <selection xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.2/@from_/@alias" attribute="//@entities.2/@features.2"/>
      </left>
    </condition>
    <inclusions xsi:type="gdmLang:Inclusion" refAlias="//@queries.2/@from_/@alias">
      <alias xsi:type="gdmLang:Alias" name="player"/>
    </inclusions>
  </queries>
  <queries xsi:type="gdmLang:Query" name="Q4_checkServer">
    <from_ xsi:type="gdmLang:From" entity="//@entities.2">
      <alias xsi:type="gdmLang:Alias" name="server"/>
    </from_>
    <projections xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.3/@from_/@alias" attribute="//@entities.2/@features.2"/>
    <condition xsi:type="gdmLang:AndConjunction">
      <left xsi:type="gdmLang:Equality" value="?">
        <selection xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.3/@from_/@alias" attribute="//@entities.2/@features.2"/>
      </left>
    </condition>
    <inclusions xsi:type="gdmLang:Inclusion" refAlias="//@queries.3/@from_/@alias">
      <alias xsi:type="gdmLang:Alias" name="player"/>
    </inclusions>
  </queries>
  <queries xsi:type="gdmLang:Query" name="Q5_playerSessions">
    <from_ xsi:type="gdmLang:From" entity="//@entities.3">
      <alias xsi:type="gdmLang:Alias" name="session"/>
    </from_>
    <projections xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.4/@from_/@alias" attribute="//@entities.3/@features.0"/>
    <condition xsi:type="gdmLang:AndConjunction">
      <left xsi:type="gdmLang:Equality" value="?">
        <selection xsi:type="gdmLang:AttributeSelection" refAlias="//@queries.4/@inclusions.0/@alias" attribute="//@entities.0/@features.2"/>
      </left>
    </condition>
    <inclusions xsi:type="gdmLang:Inclusion" refs="//@entities.3/@features.2" refAlias="//@queries.4/@from_/@alias">
      <alias xsi:type="gdmLang:Alias" name="player"/>
    </inclusions>
  </queries>
  <entities xsi:type="gdmLang:Entity" name="Player">
    <features xsi:type="gdmLang:Attribute" type="TEXT" name="playerName"/>
    <features xsi:type="gdmLang:Attribute" type="TEXT" name="playerFrags"/>
    <features xsi:type="gdmLang:Attribute" type="ID" unique="true" name="playerId"/>
    <features xsi:type="gdmLang:Reference" entity="//@entities.3" cardinality="*" name="HaveSession"/>
  </entities>
  <entities xsi:type="gdmLang:Entity" name="State">
    <features xsi:type="gdmLang:Attribute" type="NUMBER" name="posZ"/>
    <features xsi:type="gdmLang:Attribute" type="NUMBER" name="posY"/>
    <features xsi:type="gdmLang:Attribute" type="NUMBER" name="posX"/>
    <features xsi:type="gdmLang:Attribute" type="ID" unique="true" name="stateId"/>
    <features xsi:type="gdmLang:Reference" entity="//@entities.3" cardinality="1" name="session"/>
  </entities>
  <entities xsi:type="gdmLang:Entity" name="Server">
    <features xsi:type="gdmLang:Attribute" type="TEXT" name="serverName"/>
    <features xsi:type="gdmLang:Attribute" type="TEXT" name="serverIP"/>
    <features xsi:type="gdmLang:Attribute" type="ID" unique="true" name="serverId"/>
    <features xsi:type="gdmLang:Reference" entity="//@entities.3" cardinality="*" name="HostSession"/>
  </entities>
  <entities xsi:type="gdmLang:Entity" name="Session">
    <features xsi:type="gdmLang:Attribute" type="ID" unique="true" name="sessionId"/>
    <features xsi:type="gdmLang:Reference" entity="//@entities.1" cardinality="*" name="statesState"/>
    <features xsi:type="gdmLang:Reference" entity="//@entities.0" cardinality="1" name="player"/>
    <features xsi:type="gdmLang:Reference" entity="//@entities.2" cardinality="1" name="server"/>
  </entities>
</gdmLang:Model>
